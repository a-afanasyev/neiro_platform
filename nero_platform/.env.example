# ============================================
# NEIRO PLATFORM - ПЕРЕМЕННЫЕ ОКРУЖЕНИЯ
# ============================================
# 
# Этот файл содержит примеры всех необходимых переменных окружения.
# Для локальной разработки скопируйте этот фай в .env и измените значения.
#
# ВАЖНО: Файл .env НЕ должен попадать в git! Он уже в .gitignore.
#
# Команда для копирования:
# cp .env.example .env

# ============================================
# ОБЩИЕ НАСТРОЙКИ
# ============================================

# Окружение: development | production | test
NODE_ENV=development

# ============================================
# БАЗА ДАННЫХ PostgreSQL
# ============================================

# URL подключения к PostgreSQL базе данных
# Формат: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
DATABASE_URL=postgresql://neiro_user:neiro_password_dev@localhost:5437/neiro_platform

# Параметры для Docker контейнера PostgreSQL
POSTGRES_DB=neiro_platform
POSTGRES_USER=neiro_user
POSTGRES_PASSWORD=neiro_password_dev

# ============================================
# REDIS
# ============================================

# URL подключения к Redis (используется для кеширования и токенов)
# Формат: redis://HOST:PORT
REDIS_URL=redis://localhost:6380

# ============================================
# JWT ТОКЕНЫ (БЕЗОПАСНОСТЬ)
# ============================================

# Секретный ключ для подписи access токенов
# ВАЖНО: В продакшене используйте длинный случайный ключ!
# Пример генерации: openssl rand -base64 32
JWT_ACCESS_SECRET=dev_access_secret_change_in_production_2024

# Секретный ключ для подписи refresh токенов
# ВАЖНО: Должен отличаться от JWT_ACCESS_SECRET!
JWT_REFRESH_SECRET=dev_refresh_secret_change_in_production_2024

# Время жизни access токена (примеры: 15m, 1h, 2h)
JWT_ACCESS_EXPIRES_IN=15m

# Время жизни refresh токена (примеры: 7d, 30d)
JWT_REFRESH_EXPIRES_IN=7d

# ============================================
# CORS (Cross-Origin Resource Sharing)
# ============================================

# Разрешенные источники для CORS (URL фронтенда)
# Для нескольких источников используйте запятую или настройте в коде
CORS_ORIGIN=http://localhost:3001

# ============================================
# ПОРТЫ МИКРОСЕРВИСОВ
# ============================================

# Auth Service (Аутентификация)
AUTH_SERVICE_PORT=4000

# Users Service (Управление пользователями)
USERS_SERVICE_PORT=4002

# Children Service (Управление детьми)
CHILDREN_SERVICE_PORT=4003

# Diagnostics Service (Диагностика)
PORT=4004

# Routes Service (Маршруты обучения)
ROUTES_SERVICE_PORT=4005

# Assignments Service (Назначения)
ASSIGNMENTS_SERVICE_PORT=4006

# Exercises Service (Упражнения)
EXERCISES_SERVICE_PORT=4007

# Templates Service (Шаблоны)
TEMPLATES_SERVICE_PORT=4008

# Reports Service (Отчеты) - Month 3
REPORTS_SERVICE_PORT=4009

# ============================================
# MINIO (Хранилище файлов)
# ============================================

# Адрес MinIO сервера
MINIO_ENDPOINT=minio

# Порт MinIO API
MINIO_PORT=9000

# Ключ доступа MinIO
# ВАЖНО: В продакшене измените на безопасные значения!
MINIO_ACCESS_KEY=minioadmin

# Секретный ключ MinIO
MINIO_SECRET_KEY=minioadmin123

# Использовать SSL для MinIO (true | false)
MINIO_USE_SSL=false

# Названия bucket'ов в MinIO
MINIO_BUCKET_EXERCISES=exercises
MINIO_BUCKET_REPORTS=neiro-reports
MINIO_BUCKET_THUMBNAILS=neiro-reports-thumbnails
MINIO_BUCKET_MEDIA=media

# ============================================
# EMAIL DELIVERY (Week 3 - Notifications)
# ============================================

# SMTP Configuration (Gmail для development)
# Инструкция: https://support.google.com/accounts/answer/185833
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-16-char-app-password
SMTP_FROM_EMAIL=noreply@neiro.dev
SMTP_FROM_NAME=Neiro Platform

# SendGrid (Production alternative)
# SENDGRID_API_KEY=SG.xxxxxxxxxxxxx
# SENDGRID_FROM_EMAIL=noreply@neiro.dev
# SENDGRID_FROM_NAME=Neiro Platform

# ============================================
# REDIS CACHE (Week 2 - Analytics)
# ============================================

# TTL для кэша аналитики (в секундах, default: 300 = 5 минут)
REDIS_ANALYTICS_TTL=300

# ============================================
# ФРОНТЕНД (Next.js)
# ============================================

# URL API для фронтенда (публичная переменная)
# Префикс NEXT_PUBLIC_ делает переменную доступной в браузере
NEXT_PUBLIC_API_URL=http://localhost:4001

# ============================================
# ДОПОЛНИТЕЛЬНЫЕ НАСТРОЙКИ
# ============================================

# Уровень логирования (error | warn | info | debug)
LOG_LEVEL=info

# Максимальное количество запросов в минуту для rate limiting
RATE_LIMIT_MAX_REQUESTS=100

# Таймаут для HTTP запросов (в миллисекундах)
HTTP_TIMEOUT=30000
