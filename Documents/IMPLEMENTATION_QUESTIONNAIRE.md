# Опросник для уточнений перед реализацией Neiro (MVP)

Ниже — структурированный список вопросов, которые необходимо уточнить перед началом реализации. Вопросы сгруппированы по темам. В скобках даны ссылки на соответствующие документы, на которые следует опираться или в которые нужно внести изменения после получения ответов:

- ТЗ: ./neiro.md
- Контракты API (MVP): ./API_CONTRACTS_MVP.md
- Модель данных и события: ./DATA_MODEL_AND_EVENTS.md
- Дизайн‑система: ./DESIGN_SYSTEM.md
- UI Kit: ./UI_KIT.md
- Дополнительно (Next.js пресет): ../neiro-nextjs/docs/README.md

---

## 1. Объем MVP и CJM
1. Какие пользовательские сценарии входят в первый релиз (родитель, специалист)? Утвердите список экранов/фич по приоритету. (см. ТЗ §Раздел II–III: ./neiro.md)  
   **Ответ:** MVP включает весь список сценариев из `Documents/Neiro_CJM_Extended.md` и `Documents/BUSINESS_PROCESSES_AND_WORKFLOWS.md`. Приоритетные фичи на запуск:  
   - Родитель: регистрация/онбординг, добавление ребенка, прохождение диагностик, получение/выполнение назначений, отправка отчетов, участие в чатах со специалистами.  
   - Специалист: регистрация, проверка профиля и активация доступа, формирование и ведение маршрутов, назначение и управление упражнениями, контроль отчетов, участие в чатах с родителями и коллегами.  
   - Общие модули: полный жизненный цикл маршрута (создание → запуск → мониторинг → ревью), библиотека упражнений с CRUD и версионированием, коммуникации (чаты специалист↔родитель, специалист↔специалист).
2. Для онбординга родителя: какие шаги обязательны, что можно отложить? (см. Дизайн‑система: CJM 1; ./DESIGN_SYSTEM.md)  
   **Ответ:** Реализуем полный сценарий онбординга из `Documents/Neiro_CJM_Extended.md` и `Documents/BUSINESS_PROCESSES_AND_WORKFLOWS.md` без сокращений: регистрация, сбор согласий, добавление ребенка, первичная диагностика, подбор маршрута и старт сопровождения — все шаги обязательны в MVP.
3. Какие диагностические опросники реально используем в MVP (минимальный набор)? (см. ТЗ §9, API §5; ./neiro.md, ./API_CONTRACTS_MVP.md)  
   **Ответ:** Включаем методики M-CHAT-R/F, CAST, SCQ и AQ. Остальные диагностические инструменты — после MVP.
4. Что точно откладываем в roadmap (Telegram/WebRTC/Геймификация), а что нужно в пилот? (см. API §17; ./API_CONTRACTS_MVP.md)  
   **Ответ:** Включаем в MVP: Telegram-бот + Telegram WebApp, встроенную видеосвязь на WebRTC и геймификацию для детского интерфейса. Roadmap после MVP — только расширения поверх базовой реализации.

## 2. Данные и доменная модель
5. Нужны ли дополнительные поля в сущностях `Child`, `Specialist`, `CorrectionRoute`, которых нет сейчас? (см. ./DATA_MODEL_AND_EVENTS.md §1)  
   **Ответ:** Нет, используем состав полей, зафиксированный в текущей версии документации (`DATA_MODEL_AND_EVENTS.md` и связанные артефакты).
6. Какие справочники должны быть предзаполнены (категории целей, сложности упражнений, возрастные диапазоны)? (см. ./DATA_MODEL_AND_EVENTS.md)  
   **Ответ (предложение):**  
   - `goal_categories`/`template_goals.category`: Communication, Social Interaction, Behavioral Regulation, Sensory Integration, Fine Motor, Gross Motor, Cognitive Skills, Daily Living.  
   - `goal_type`/`route_goals.goal_type`: Skill Acquisition, Behavior Reduction, Generalization, Maintenance.  
   - `exercises.category`: синхронизирован с целями (Communication, Sensory, Motor, Cognitive, Self-care, Play).  
   - `exercises.difficulty`: Introductory, Guided, Independent, Intensive.  
   - Возрастные диапазоны (`route_templates.target_age_range`, `exercises.age_min/max`): 2–3, 3–4, 4–5, 5–6, 6–7, 7–9, 9–12.  
   - `route_templates.severity_level`: Mild, Moderate, Intensive.  
   - `template_milestones.checkpoint_type`: Diagnostic Review, Specialist Sync, Parent Coaching, Progress Evaluation.  
   - `reports.child_mood` enum: Calm, Engaged, Tired, Frustrated, Meltdown.  
   Эти справочники загружаем seed-скриптом до старта пилота, чтобы обеспечить консистентность маршрутов и аналитики.
7. Требуются ли дополнительные ограничения/правила к Constitution Check (например, дополнительные бизнес‑инварианты)? (см. ./DATA_MODEL_AND_EVENTS.md §4)  
   **Ответ:** Дополнительные ограничения не требуются. Используем набор правил из §4 `DATA_MODEL_AND_EVENTS.md`.

## 3. Маршруты, фазы, цели
8. Шаблоны маршрутов: какой минимальный набор шаблонов нужен к пилоту (название, возраст, уровень тяжести)? Кто ответственный за контент? (см. API §7.1 и ТЗ §6.3; ./API_CONTRACTS_MVP.md, ./neiro.md)  
   **Ответ (предложение):**  
   - `Early Communication Boost` — возраст 2–4, тяжесть Moderate; фокус на базовом взаимодействии и запуске речи.  
   - `Preschool Independence Path` — возраст 4–6, тяжесть Mild; акцент на адаптивные навыки, подготовку к детсаду/школе.  
   - `Structured Support Intensive` — возраст 3–6, тяжесть Intensive; мультимодальная работа с ежедневными упражнениями.  
   - `Social Skills Navigator` — возраст 6–9, тяжесть Moderate; развитие социальных сценариев и регуляции поведения.  
   Контентом и актуализацией шаблонов занимается клиническая команда: ведущий нейропсихолог (owner) и контент-редактор библиотеки упражнений (соавтор, отвечает за формат и мультимедиа).
9. Параллельные фазы: используем ли в MVP или только последовательные? (см. ./DATA_MODEL_AND_EVENTS.md §1.10)  
   **Ответ:** Поддерживаем параллельные фазы маршрутов уже в MVP.
10. Милестоуны: какие типы используем по умолчанию и как часто (недельная сетка)? (см. API §6, ./DATA_MODEL_AND_EVENTS.md)  
   **Ответ (предложение):** Типы по умолчанию — `Diagnostic Review`, `Specialist Sync`, `Parent Coaching`, `Progress Evaluation` (один в квартале). Курирующий специалист при создании маршрута свободно расставляет контрольные точки с привязкой к календарю (недельная сетка) либо как относительные строки («через N дней/занятий»). Значения по умолчанию: еженедельный `Specialist Sync`, каждые 4 недели `Progress Evaluation`, `Parent Coaching` по необходимости. Настройки можно редактировать в параметрах маршрута до публикации.

## 4. Диагностика
11. Для первого релиза: подтверждаем M‑CHAT‑R/F как стартовую методику? Нужны ли интерпретации/пороговые уровни в UI? (см. ТЗ §9; ./neiro.md)  
   **Ответ:** Минимальный набор методик — M-CHAT-R/F, CAST, SCQ, AQ. Интерпретации и пороговые уровни отображаются только специалистам; родителям показываем итоговый отчет после проверки и комментариев специалиста.
12. Требуется ли загрузка видео/фото для диагностики уже в MVP? (см. Media §12; ./API_CONTRACTS_MVP.md)  
   **Ответ:** Да, загрузка фото/видео обязательна уже в первом релизе, это ключевой элемент диагностики.

## 5. Библиотека упражнений и назначения
13. Источник контента упражнений (видео/инструкции): готов ли материал, форматы, права на использование? (см. ТЗ §10; ./neiro.md)  
   **Ответ:** Контент готовится специалистами и загружается по мере готовности. Требуется удобный редактор/импорт для текстовых упражнений с фото и для видео с текстовым сопровождением. Права на использование закрепляются за специалистами/организацией при добавлении в библиотеку.
14. Обязателен ли линк упражнения к цели при назначении в MVP (строгая валидация) или допускаем мягкий режим с предупреждением? (см. Constitution Check §4.5; ./DATA_MODEL_AND_EVENTS.md)  
   **Ответ:** Используем мягкий режим: система предупреждает о несвязанном упражнении, но позволяет сохранить назначение без жесткого блокера (решение остается за специалистом).
15. Стратегия версионирования упражнений: требуется ли аудит изменений для контента в MVP? (см. API §7; ./API_CONTRACTS_MVP.md)  
   **Ответ:** В MVP реализуем базовое редактирование с фиксацией автора/даты последнего изменения. Полноценную версионность и продвинутый аудит откладываем на пост-MVP.

## 6. Отчеты родителей и ревью специалистов
16. Минимальная структура отчета: какие поля обязательны (длительность, статус, настроение, медиа)? (см. API §9; ./API_CONTRACTS_MVP.md)  
   **Ответ (предложение):**  
   - Обязательные поля: `assignment_id`, `status` (`completed | partial | failed`), `duration_minutes`, `child_mood` (enum), `submitted_at`.  
   - Опциональные, но рекомендуемые: `media` (фото/видео), `support_needed` (checkbox), `additional_notes`, `observations` (краткий текст).  
   - UI показывает количество выполненных упражнений за период и прогресс/регресс относительно маршрута (агрегация по milestones). Отчёт ограничивается веб-страницей; экспорт во внешние форматы не нужен на MVP.
17. Срок на редактирование отправленного отчета: сколько минут/часов допускаем? (см. Дизайн‑система: CJM 11; ./DESIGN_SYSTEM.md)  
   **Ответ:** Редактирование после отправки не допускается; отчет сразу фиксируется и передается специалисту на ревью.
18. Ревью: обязательен ли статус «needs_attention» и нотификация родителю? Канал уведомления? (см. API §9, §10; ./API_CONTRACTS_MVP.md)  
   **Ответ:** Статус `needs_attention` обязателен. При его установке отправляем родителю уведомление: in-app баннер + push через Telegram-бот (при отсутствии подписки — fallback на email).

## 7. Аналитика и дашборды
19. Какие метрики обязательно показать родителю и специалисту в MVP (KPI/тайлы/тренды)? (см. API §11; ./API_CONTRACTS_MVP.md)  
   **Ответ:** Показываем полный набор метрик, зафиксированный в актуальной документации (CJM, бизнес-процессы, API). В частности:  
   - Родительский дашборд: % выполненных назначений за неделю, план/факт по упражнениям, динамика настроения ребенка, статус ключевых вех (в норме/под риском), последние комментарии специалистов, таймер до следующего ревью.  
   - Дашборд специалиста: свод по детям (% выполнения, просрочки, среднее время проверки отчетов), очередь отчетов «ожидает ревью», флаги рисков (низкая вовлеченность, просрочка >2 дней, резкое падение настроения), прогресс по целям и вехам, загрузка специалиста.  
   Дополнительно доступны тренды по диагностическим баллам и нагрузке, как описано в `BUSINESS_PROCESSES_AND_WORKFLOWS.md` и `Neiro_CJM_Extended.md`.
20. Требуются ли risk‑алерты для пилота или достаточно списка просрочек? (см. API §16, ./API_CONTRACTS_MVP.md)  
   **Ответ:** Да, реализуем автоматические алерты. Курирующий специалист настраивает, какие типы алертов активны для конкретного ребенка/упражнения (просрочка >N дней, падение настроения, отсутствие отчетов и т. п.). Для остальных отображаем список просрочек.

## 8. PWA и офлайн
21. Какие разделы должны работать офлайн в MVP (задания, отчеты, медиа‑кеш)? (см. API §15; ./API_CONTRACTS_MVP.md)  
   **Ответ:** Офлайн-режим не реализуем в MVP; все разделы требуют онлайн-доступа. Кеширование офлайн-контента переносим на последующие релизы.
22. Политика обновления кеша и конфликты синхронизации — делаем сейчас или откладываем? (см. API §17.4; ./API_CONTRACTS_MVP.md)  
   **Ответ:** Переносим на пост-MVP вместе с офлайн-функциональностью. В первой версии работаем только в онлайн-режиме.

## 9. Безопасность, соответствие, данные
23. Требования по локализации данных (152‑ФЗ): в каком регионе размещаем БД и медиа? (см. ТЗ §17; ./neiro.md)  
   **Ответ:** Полное выполнение требований 152‑ФЗ переносим на пост-MVP. В первой версии размещение БД и медиа выбираем исходя из технической готовности, без обязательной локализации в РФ.
24. Какие каналы уведомлений разрешены для персональных/медицинских данных (email/SMS/push/Telegram)? (см. ТЗ §17, API §10; ./neiro.md, ./API_CONTRACTS_MVP.md)  
   **Ответ:** Разрешаем push-уведомления (PWA/мобильные), email и Telegram. SMS для чувствительных данных не используем на MVP.
25. Политики хранения/удаления данных субъекта: сроки, процессы, ответственные? (см. API §14 Security & Compliance; ./API_CONTRACTS_MVP.md)  
   **Ответ:** Используем сроки из `DATA_GOVERNANCE.md` (§4): профили пользователей — договор + 1 год, профили детей — срок сопровождения + 5 лет, диагностика и маршруты/отчеты — минимум 5 лет, аудит-логи — 3 года, бэкапы — rolling 30 дней. По окончании периода выполняем деперсонализацию/удаление согласно процессу §3 Data Governance. Ответственным за запуск процедур назначаем администратора платформы (совместно с DPO/Security).
26. Аудит действий: какие события фиксируем обязательно (просмотр карт, выгрузки, изменения целей)? (см. API §14; ./API_CONTRACTS_MVP.md)  
   **Ответ (предложение):** Логируем аутентификацию/выход, просмотр и редактирование карт детей и маршрутов, изменения целей/фаз/назначений, загрузку/скачивание медиа, операции с отчетами, админские действия (создание/деактивация пользователей, смена ролей), выгрузки данных/отчеты, настройку уведомлений. Формат и доступ к логам — как в `DATA_GOVERNANCE.md` §7 и `API_CONTRACTS_MVP.md` (Security & Compliance API).

## 10. Архитектура и инфраструктура
27. Транспорт событий: достаточно ли Postgres Outbox на MVP или готовим отдельный брокер? Нужен ли DLQ на старте? (см. События §2; ./DATA_MODEL_AND_EVENTS.md)  
   **Ответ:** Для MVP закрепляем Postgres Outbox + фоновые воркеры как единственный транспорт. События публикуем из `event_outbox`, ретраи и DLQ реализуем через таблицу `event_outbox_failures` и мониторинг воркеров. Подготовительные работы по Kafka/Redpanda уходим в roadmap после подтверждения нагрузок.
28. Объектное хранилище: MinIO on‑prem vs S3 совместимый провайдер? Требования к стоимости/региону/доступности. (см. API §12; ./API_CONTRACTS_MVP.md)  
   **Ответ:** Для MVP используем on-prem MinIO (разворачиваем в кластере). Переезд на внешнего S3-провайдера рассматриваем после пилота.
29. Секреты и конфиги: единый подход (Vault/SOPS/1Password), кто владелец? План rotation.  
   **Ответ:** Используем HashiCorp Vault как единый источник секретов/конфигов. Владельцы — DevOps + Security Officer. На MVP ротацию не автоматизируем; обязательна MFA для админов/сотрудников через приложение-аутентификатор. План по автоматической ротации — в roadmap после пилота.
30. Цели по перформансу/SLO: подтверждаем <500ms P95 API и <2s TTI? (см. API §1.7; ./API_CONTRACTS_MVP.md)  
   **Ответ (предложение):** Оставляем целевые значения из `API_CONTRACTS_MVP.md`: P95 для API < 500 мс, P99 < 1 с, TTI фронтенда < 2 с на типовом устройстве. Для MVP фиксируем допуски не хуже этих цифр, мониторим через APM/Real User Monitoring.

## 11. Интеграции и коммуникации
31. Почтовый/SMS провайдер: какой используем в пилоте? Нужна ли отправка из «белого» домена? (см. API §10; ./API_CONTRACTS_MVP.md)  
   **Ответ:** Для MVP подключаем специализированного провайдера (Mailgun или Postmark) с заключённым DPA/BAA. Используем выделенный «белый» домен (`no-reply@neiro.dev`), SMS не подключаем.
32. Telegram: оставляем только уведомления или нужен WebApp в пилоте? (см. API §17.1; ./API_CONTRACTS_MVP.md)  
   **Ответ:** В MVP запускаем и уведомления, и полнофункциональный Telegram WebApp (быстрые отчеты, расписание, чаты).

## 12. UX, язык, доступность
33. Тональность и тексты для родителей: есть ли готовый гайд по языку? Кто утверждает копирайт? (см. Дизайн‑система §Паттерны; ./DESIGN_SYSTEM.md)  
   **Ответ (предложение):** Используем поддерживающий, эмпатичный тон «эксперт-партнер», избегаем меджаргона. Формируем короткий гайд в дизайн-системе (раздел «Паттерны»). Финальное утверждение текстов — Product Lead + клинический редактор.
34. Локализация: только RU на MVP или сразу RU+UZ/EN? Приоритет экранов локализации.  
   **Ответ:** MVP выпускаем на русском. Закладываем архитектуру под ru/uz/en, но перевод остальных языков переносим на пост-MVP. Приоритет следующей волны: родительский дашборд, отчеты, диагностики, чат.
35. Accessibility: целевой уровень — WCAG 2.1 AA. Есть ли исключения для MVP? (см. Дизайн‑система §Accessibility; ./DESIGN_SYSTEM.md)  
   **Ответ:** Целимся в WCAG 2.1 AA для всех пользовательских сценариев MVP. Допустимые временные исключения — отсутствие субтитров/перевода жестовым языком для видео (закрываем в roadmap).

## 13. Контент и модерация
36. Процесс модерации упражнений и методик: роли, SLA, версияция, аудит. (см. ТЗ §13.2; ./neiro.md)  
   **Ответ (предложение):** Автор (профильный специалист) создает черновик → контент-редактор проверяет структуру/формат (SLA 24 ч) → клинический супервизор утверждает методику (SLA 48 ч). После публикации изменения идут через новую версию, старая остается доступной в архиве. Все действия логируются (кто создал/утвердил/отклонил) в журнал аудита.
37. Правовой статус медиа родителей (видео/фото): согласия, сроки хранения, право на удаление. (см. ТЗ §17, API §12; ./neiro.md, ./API_CONTRACTS_MVP.md)  
   **Ответ:** Медиа относятся к PHI. Сбор — только при явном согласии родителя (цифровой офферта + чекбокс при загрузке). Храним 5 лет (по Data Governance), после — деперсонализация/удаление. Родитель может запросить удаление через DSAR; при активном маршруте согласие можно отозвать, после чего медиа блокируются до завершения обработки запроса.

## 14. Тестирование и качество
38. Набор обязательных тестов для пилота: контрактные, интеграционные E2E, перформанс‑санити — подтверждаем перечень? (см. API §20; ./API_CONTRACTS_MVP.md)  
   **Ответ (предложение):** Обязательные:  
   - Автоматические contract tests для всех внешних API (Prism + CI).  
   - Интеграционные тесты маршрута «диагностика → маршрут → отчеты» (back+front).  
   - E2E smoke (Playwright) по критичным сценариям родителя и специалиста.  
   - Нагрузочный санити (k6) на ключевые эндпоинты (auth, assignments, reports).  
   - Регулярные security checks (OWASP ZAP baseline).  
   Отчет по статусу тестов включаем в релизный чек-лист пилота.
39. Тестовые данные/seed: кто поставляет шаблоны маршрутов и 10+ упражнений для демо? Сроки готовности.  
   **Ответ:** Клиническая команда (ведущий нейропсихолог + контент-редактор) готовит 4 шаблона маршрутов и минимум 12 упражнений. Дедлайн — за 2 недели до старта пилота, чтобы успеть прогнать seed-скрипты.

## 15. Пилот и поддержка
40. Состав пилота (специалисты/семьи), датапойнты успеха и формат обратной связи. (см. ТЗ §20; ./neiro.md)  
   **Ответ (предложение):** Пилот: 5 ведущих специалистов (2 нейропсихолога, 1 логопед, 1 АВА, 1 супервизор) и 20 семей (разбивка по возрастным шаблонам). KPI: % выполненных назначений ≥70%, среднее время ревью <48 ч, NPS семьи ≥8/10, отсутствие критичных инцидентов. Обратная связь — еженедельные ретроспективы (онлайн) + финальный опрос.
41. Каналы поддержки и SLA на пилоте (L1/L2/L3): подтверждаем часы и целевые времена реакции. (см. ТЗ §22; ./neiro.md)  
   **Ответ (предложение):**  
   - **L1:** in-app чат + Telegram-бот (операторы 9:00–21:00 МСК, автоответы 24/7), время реакции ≤15 мин.  
   - **L2:** email `support@neiro.dev` + тикеты внутри платформы, рабочие дни 9:00–21:00, реакция ≤2 ч.  
   - **L3:** профильные эксперты (клинические/техлиды), только по эскалациям, ответ ≤24 ч.  
   Каналы телефонии и видео не запускаем в MVP.

---

### Инструкция по использованию опросника
- Ответы дать прямо в этом файле или в отдельном документе с перекрестными ссылками на пункты.
- После получения ответов внести правки в: контракты API, модель данных/миграции, дизайн‑систему и CJM, а также в ТЗ.
